
version: "3.9"

services:
  nuxt:
    build:
      context: .
      dockerfile: Dockerfile
    command: npm run startProduction

  envoy:
    image: envoyproxy/envoy:v1.26-latest
    ports:
      - "443:3010"
    volumes:
      - ./envoy.yaml:/etc/envoy/envoy.yaml
      - /etc/letsencrypt/live/snoozehub.it/privkey.pem:/etc/letsencrypt/privkey.pem
      - /etc/letsencrypt/live/snoozehub.it/fullchain.pem:/etc/letsencrypt/fullchain.pem
    environment:
      - ENVOY_UID=0
  swagger:
    image: swaggerapi/swagger-ui
    volumes:
      - ./swagger-gen:/foo
    environment:
      - SWAGGER_JSON=/foo/apidocs.swagger.json
      - BASE_URL=/docs

networks:
  proxynet:
    name: custom_network