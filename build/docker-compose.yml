
version: "3.9"

services:
  nuxt:
    build:
      context: ..
    command: npm run startProduction

  envoy:
    image: envoyproxy/envoy:v1.26-latest
    ports:
      - "80:80"
      - "443:443"
    volumes:
      - ./envoy.yaml:/etc/envoy/envoy.yaml
      - /etc/letsencrypt/live/snoozehub.it/privkey.pem:/certs/privkey.pem
      - /etc/letsencrypt/live/snoozehub.it/fullchain.pem:/certs/cert.pem
  swagger:
    image: swaggerapi/swagger-ui
    volumes:
      - ../swagger-gen:/foo
    environment:
     - SWAGGER_JSON=/foo/apidocs.swagger.json
     - BASE_URL=/docs

networks:
  proxynet:
    name: custom_network